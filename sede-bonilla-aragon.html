<!DOCTYPE html>
<html lang="es">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WS7PGGFN');</script>
  <!-- End Google Tag Manager -->
    <title>Megafitness GYM | Sede Bonilla Aragon </title>
    <meta name="description" content="Megafitness GYM es un gimnasio de alto rendimiento en Cali con 3 sedes: El Diamante, Bonilla Aragon y Poblado 1, ofreciendo instalaciones modernas y horarios flexibles." />
    <link rel="icon" href="../images/logo-donde-seria.ico">

    <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "Organization",
            "name": "Megafitness GYM",
            "address": {
              "@type": "PostalAddress",
              "streetAddress": "Cra. 27 #74-18",
              "addressLocality": "Cali",
              "addressRegion": "Valle del Cauca",
              "addressCountry": "CO"
            },
            "geo": {
                "@type": "GeoCoordinates",
                "latitude": "3.420613893091852",
                "longitude": "-76.50189546279704"
            },
            "telephone": "573222914939",
            "openingHoursSpecification": [
            {
              "@type": "OpeningHoursSpecification",
              "dayOfWeek": [
                "Monday",
                "Tuesday",
                "Wednesday"
              ],
              "opens": "05:00",
              "closes": "22:00"
            },
            {
              "@type": "OpeningHoursSpecification",
              "dayOfWeek": "Thursday",
              "opens": "22:00",
              "closes": "00:00"
            },
            {
              "@type": "OpeningHoursSpecification",
              "dayOfWeek": "Friday",
              "opens": "00:00",
              "closes": "22:00"
            },
            {
              "@type": "OpeningHoursSpecification",
              "dayOfWeek": "Saturday",
              "opens": "08:00",
              "closes": "16:00"
            },
            {
              "@type": "OpeningHoursSpecification",
              "dayOfWeek": "Sunday",
              "opens": "08:00",
              "closes": "14:00"
            }
          ]
                }
                </script>
                <!-- Meta Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '494994223683472');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=494994223683472&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9YBBGYCZBW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9YBBGYCZBW');
</script>
<!-- Meta Pixel Code, Google Tag y dem√°s scripts se mantienen igual -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"></script>
<!-- Owl Carousel CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
  integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g=="
  crossorigin="anonymous" />
<!-- Google Fonts, OWL Carousel y dem√°s CSS -->
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../grid.css">
<link rel="stylesheet" href="../360.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/core/index.min.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/virtual-tour-plugin/index.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/markers-plugin/index.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/gallery-plugin/index.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/plan-plugin/index.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/visible-range-plugin/index.css" />
<link rel="stylesheet" href="../styles.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css">


</head>

<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WS7PGGFN"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

<!-- NAV -->
<div class="nav-wrapper">
  <div class="container">
    <div class="nav">
      <a href="https://www.dondeseria.com/" class="logo">
        <i class='bx bx-webcam bx-tada main-color'></i>D√ìNDE<span class="main-color"> SER√çA</span>
      </a>
      <ul class="nav-menu" id="nav-menu">
        <li><a href="https://www.dondeseria.com/index.html">Inicio</a></li>
        <li><a href="https://www.dondeseria.com/mapa/index.html">Mapa</a></li>

        <li><a href="https://www.dondeseria.com/index.html">Restaurantes</a></li>
        <li><a href="https://www.dondeseria.com/index.html">Gyms</a></li>
        <li><a href="https://www.dondeseria.com/blogs/index.html">Blogs</a></li>
        <li><a href="https://www.dondeseria.com/index.html">Contacto</a></li>
      </ul>
      <!-- MOBILE MENU TOGGLE -->
      <div class="hamburger-menu" id="hamburger-menu">
        <div class="hamburger"></div>
      </div>
    </div>
  </div>
</div>
<!-- END NAV -->

<div class="global-container2">
  <div class="header-container2">
    <div class="header-content2">
      <h1>Megafitness GYM | Bonilla Aragon</h1>
    </div>
    <div class="buttons-container2">
      <button class="btn1" onclick="openInNewTab('https://www.google.com/maps/dir//MEGAFITNESS,+Cra.+27+%2374-18,+Alfonso+Bonilla,+Cali,+Valle+del+Cauca/@3.4256735,-76.4870323,16.75z/data=!4m9!4m8!1m0!1m5!1m1!1s0x8e30a715fa3f4df7:0x310ec89347ec2868!2m2!1d-76.4846543!2d3.4236506!3e0?entry=ttu&g_ep=EgoyMDI1MDMxMi4wIKXMDSoASAFQAw%3D%3D')"><i class='bx bx-map bx-tada' ></i> Como Llegar <i class='bx bx-map bx-tada' ></i></button>
      <button class="btn2" onclick="openInNewTab('https://www.instagram.com/megafitnessgym.cali/')"><i class='bx bxl-instagram bx-tada' ></i> Instagram <i class='bx bxl-instagram bx-tada' ></i></button>
  </div>
  </div>
  <div class="restaurantemadre">
    <div id="viewer360">
      <div class="niveles">
        <p style="text-align: center; padding-left: 2px; padding-right: 2px; margin: 0; color: white;">PISO EN EL<br>QUE ESTAS</p>
        <button id="btn-piso-1" class="nivel-boton" title="Primer Piso" onclick="changeFloor(1)">1¬∞ Piso</button>
        <button id="btn-piso-2" class="nivel-boton activo" title="Segundo Piso" onclick="changeFloor(2)">Entrada / 2¬∞ Piso</button>
        <button id="btn-piso-3" class="nivel-boton" title="Tercer Piso" onclick="changeFloor(3)">3¬∞ Piso</button>
        <button id="btn-piso-4" class="nivel-boton" title="Tercer Piso" onclick="changeFloor(4)">4¬∞ Piso</button>

      </div>
      <div class="whatsapp-btn" style="display: flex; justify-content: center; align-items: center;">
          <button id="whatsapp-button">
              Inscribete <i class="bx bxl-whatsapp bx-tada" style="font-size: 20px;"></i>
            </button>
      </div>
    </div>
    <!-- SIDE PANEL: Se muestra el logo y debajo el carrusel de rese√±as -->
    <div class="side-panel2">
      <div class="logo-container2">
        <img src="./megafitness-gym-logo.png" alt="Logo del Gimnasio Megafitness GYM" class="logo" style="max-width: 35% !important;">
      </div>
      <div class="resenas">
          <h3 style="color: black;">Ultimas Rese√±as en Google Maps</h3>
      </div>
      <!-- Contenedor del carrusel de rese√±as -->
      <div id="reviews-carousel" class="owl-carousel">
        <!-- Se cargar√°n las rese√±as din√°micamente -->
      </div>
    </div>
  </div>
</div>

<!-- FOOTER SECTION -->
<footer class="section">
  <div class="container">
    <div class="row">
      <div class="col-4 col-md-6 col-sm-12">
        <div class="content">
          <a href="#" class="logo">
            <i class='bx bx-webcam bx-tada main-color'></i>D√ìNDE<span class="main-color"> SER√çA</span>
          </a>
          <p>
            Nos especializamos en capturar experiencias √∫nicas con recorridos 360¬∞ en restaurantes, gimnasios, bares y m√°s. Nuestro objetivo es promocionar locales y negocios para que lleguen a m√°s personas, mostrando su esencia de una manera inmersiva y atractiva. ¬°Explora, conoce y vive lo mejor de cada lugar con nosotros! üåç‚ú®
          </p>
          <div class="social-list">
            <a href="https://www.instagram.com/cusig.co/" class="social-item">
              <i class="bx bxl-instagram"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
<!-- END FOOTER SECTION -->

<!-- COPYRIGHT SECTION -->
<div class="copyright">
  Copyright 2025 <a href="https://www.youtube.com/channel/UCnNgtK4tGlWcceXVzoyTg8Q" target="_blank">
    CUSIG S A S</a>
</div>
<!-- END COPYRIGHT SECTION -->

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<!-- OWL CAROUSEL JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js" integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw==" crossorigin="anonymous"></script>
<!-- APP SCRIPT -->
<script src="../app.js"></script>
<script>
  function openInNewTab(url) {
    window.open(url, '_blank').focus();
  }
</script>
<script>
  const whatsappButton = document.getElementById('whatsapp-button');
  whatsappButton.addEventListener('click', function(e) {
    e.preventDefault();
    window.location.href = 'https://wa.link/3xo6ng';
  });
</script>
<!-- C√≥digo para inicializar el visor 360 (c√≥digo existente) -->
<script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three/build/three.module.js",
      "@photo-sphere-viewer/core": "https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/core/index.module.js",
      "@photo-sphere-viewer/virtual-tour-plugin": "https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/virtual-tour-plugin/index.module.js",
      "@photo-sphere-viewer/markers-plugin": "https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/markers-plugin/index.module.js",
      "@photo-sphere-viewer/gallery-plugin": "https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/gallery-plugin/index.module.js",
      "@photo-sphere-viewer/plan-plugin": "https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/plan-plugin/index.module.js",
      "@photo-sphere-viewer/visible-range-plugin": "https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/visible-range-plugin/index.module.js",
      "@photo-sphere-viewer/autorotate-plugin": "https://cdn.jsdelivr.net/npm/@photo-sphere-viewer/autorotate-plugin/index.module.js",
      "leaflet": "https://unpkg.com/leaflet@1.9.4/dist/leaflet-src.esm.js"
    }
  }
</script>
<script type="module">
  import { Viewer } from '@photo-sphere-viewer/core';
  import { VirtualTourPlugin } from '@photo-sphere-viewer/virtual-tour-plugin';
  import { GalleryPlugin } from '@photo-sphere-viewer/gallery-plugin';
  import { MarkersPlugin } from '@photo-sphere-viewer/markers-plugin';
  import { VisibleRangePlugin } from '@photo-sphere-viewer/visible-range-plugin';
  import * as PlanPlugin from '@photo-sphere-viewer/plan-plugin';
  import { AutorotatePlugin } from '@photo-sphere-viewer/autorotate-plugin';

  const baseUrl = '../foto_alfonso/';
  const pisos = {
    1: [
    {
  id: 'nodo12',
  panorama: `${baseUrl}12.jpg`,
  thumbnail: `${baseUrl}12.jpg`,
  name: 'Entrada',
  caption: 'Entrada MegaFitness Gym',
  links: [
  { nodeId: 'nodo13', position: {yaw: 2.0053204322007265, pitch: -0.3097638376925218} },
  { nodeId: 'nodo17', position: {yaw: 3.168641112228687, pitch: -0.13918750928347068} }
]
,
  sphereCorrection: { pan: '270deg' },
},
{
  id: 'nodo13',
  panorama: `${baseUrl}13.jpg`,
  thumbnail: `${baseUrl}13.jpg`,
  name: 'Entrada',
  caption: 'Entrada MegaFitness Gym',
  links: [
  { nodeId: 'nodo12', position: {yaw: 4.784713676323018, pitch: -0.2977622873316186} },
  { nodeId: 'nodo14', position: {yaw: 1.7247394045423718, pitch: -0.3457952291544837} },
  { nodeId: 'nodo18', position: {yaw: 3.2910654165884883, pitch: -0.05525404489395269} }
],
  sphereCorrection: { pan: '270deg'},
},
{
  id: 'nodo14',
  panorama: `${baseUrl}14.jpg`,
  thumbnail: `${baseUrl}14.jpg`,
  name: 'Entrada Piso',
  caption: 'Entrada MegaFitness Gym',
  links: [
  { nodeId: 'nodo13', position: {yaw: 6.075715783240273, pitch: -0.28135639749896635} },
  { nodeId: 'nodo16', position: {yaw: 4.755002329887734, pitch: -0.17221300343289458} }
],
  sphereCorrection: { pan: '180deg' },
},
{
  id: 'nodo16',
  panorama: `${baseUrl}16.jpg`,
  thumbnail: `${baseUrl}16.jpg`,
  name: 'Primer Piso',
  caption: 'Primer Piso MegaFitness Gym',
  links: [
  { nodeId: 'nodo14', position: {yaw: 4.658543564656976, pitch: -0.1674057115519263} },
  { nodeId: 'nodo17', position: {yaw: 3.302293794388337, pitch: -0.3348652954483322} }
  ,
  { nodeId: 'nodo18', position: {yaw: 1.7397930184405865, pitch: -0.12140679036505908} }
],
  sphereCorrection: { pan: '180deg' },
},
{
  id: 'nodo17',
  panorama: `${baseUrl}17.jpg`,
  thumbnail: `${baseUrl}17.jpg`,
  name: 'Primer Piso',
  caption: 'Primer Piso MegaFitness Gym',
  links: [
  { nodeId: 'nodo12', position: {yaw: 2.060556287583803, pitch: -0.21799066453604343} },
  { nodeId: 'nodo16', position: {yaw: 3.567637653734479, pitch: -0.10984246432054423} },
  { nodeId: 'nodo18', position: {yaw: 4.585597213570531, pitch: -0.12224639025394346} }
],
  sphereCorrection: { pan: '0deg' },
},

      {
        id: 'nodo18',
        panorama: `${baseUrl}18.jpg`,
        thumbnail: `${baseUrl}18.jpg`,
        name: 'Primer Piso',
        caption: 'Primer Piso MegaFitness Gym',
        links: [
  { nodeId: 'nodo16', position: {yaw: 4.81296239612425, pitch: -0.20272759071042} },
  { nodeId: 'nodo17', position: {yaw: 4.010612532140599, pitch: -0.14988155118005508} }
],
        sphereCorrection: { pan: '0deg' },
        
      }
    ],
    2: [
    {
  id: 'nodo1',
  panorama: `${baseUrl}entrada.jpg`,
  thumbnail: `${baseUrl}entrada.jpg`,
  name: 'Entrada',
  caption: 'Entrada MegaFitness Gym',
  links: [{
    nodeId: 'nodo2',
    position: {yaw: 2.238821846062229, pitch: -0.09920004539535476}
  }],
  sphereCorrection: { pan: '270deg' },
},
{
  id: 'nodo2',
  panorama: `${baseUrl}2.jpg`,
  thumbnail: `${baseUrl}2.jpg`,
  name: 'Entrada',
  caption: 'Entrada MegaFitness Gym',
  links: [
    { nodeId: 'nodo3', position: {yaw: 3.6249088057854832, pitch: -0.6149876825109599} },
    { nodeId: 'nodo1', position: {yaw: 2.2513169060747713, pitch: -0.8092509576590263} }
  ],
  sphereCorrection: { pan: '10deg' },
},
{
  id: 'nodo3',
  panorama: `${baseUrl}3.jpg`,
  thumbnail: `${baseUrl}3.jpg`,
  name: 'Segundo Piso',
  caption: 'Segundo Piso MegaFitness Gym',
  links: [
    { nodeId: 'nodo2', position: {yaw: 1.41842472217214, pitch: -0.7265059941079857} },
    { nodeId: 'nodo4', position: {yaw: 4.343685088344175, pitch: -0.1446614197787559} }
  ],
  sphereCorrection: { pan: '180deg' },
},
{
  id: 'nodo4',
  panorama: `${baseUrl}4.jpg`,
  thumbnail: `${baseUrl}4.jpg`,
  name: 'Segundo Piso',
  caption: 'Segundo Piso MegaFitness Gym',
  links: [
    { nodeId: 'nodo5', position: {yaw: 4.587514951388805, pitch: -0.28074542342837194} },
    { nodeId: 'nodo3', position: {yaw: 1.0825169211365144, pitch: -0.29519448228173273} }
  ],
  sphereCorrection: { pan: '180deg' },
},
{
  id: 'nodo5',
  panorama: `${baseUrl}5.jpg`,
  thumbnail: `${baseUrl}5.jpg`,
  name: 'Segundo Piso',
  caption: 'Segundo Piso MegaFitness Gym',
  links: [
    { nodeId: 'nodo4', position: {yaw: 6.097740942619417, pitch: -0.2755996461764689} },
    { nodeId: 'nodo6', position: {yaw: 1.708534716532905, pitch: -0.17383601040984686} }
  ],
  sphereCorrection: { pan: '180deg' },
},
{
  id: 'nodo6',
  panorama: `${baseUrl}6.jpg`,
  thumbnail: `${baseUrl}6.jpg`,
  name: 'Segundo Piso',
  caption: 'Segundo Piso MegaFitness Gym',
  links: [
    { nodeId: 'nodo5', position: {yaw: 4.730249740877008, pitch: -0.1391713957881766} },
    {nodeId: 'nodo7', position: {yaw: 1.626186522353131, pitch: -0.22501102839879028}},
  ],
  sphereCorrection: { pan: '0deg' },
}
,
{
  id: 'nodo7',
  panorama: `${baseUrl}7.jpg`,
  thumbnail: `${baseUrl}7.jpg`,
  name: 'Segundo Piso',
  caption: 'Segundo Piso MegaFitness Gym',
  links: [

    { nodeId: 'nodo6', position: {yaw: 0.10427145815235224, pitch: -0.20897415418537957} },
    { nodeId: 'nodo8', position: {yaw: 1.4302598804490587, pitch: -0.2213040251061047} }
  ],
  sphereCorrection: { pan: '180deg' },
},
{
  id: 'nodo8',
  panorama: `${baseUrl}8.jpg`,
  thumbnail: `${baseUrl}8.jpg`,
  name: 'Segundo Piso',
  caption: 'Segundo Piso MegaFitness Gym',
  links: [
    { nodeId: 'nodo7', position: {yaw: 4.748772923549976, pitch: -0.2678444618703084} },
    { nodeId: 'nodo9', position: {yaw: 1.519851224424307, pitch: -0.2640434625941719}
  },
  ],
  sphereCorrection: { pan: '180deg' },
},
{
  id: 'nodo9',
  panorama: `${baseUrl}9.jpg`,
  thumbnail: `${baseUrl}9.jpg`,
  name: 'Segundo Piso',
  caption: 'Segundo Piso MegaFitness Gym',
  links: [
    { nodeId: 'nodo8', position: {yaw: 4.555704148436488, pitch: -0.24535305006841224}  },
    { nodeId: 'nodo10', position: {yaw: 6.18086911680502, pitch: -0.2867538538804433} },

  ],
  sphereCorrection: { pan: '0deg' },
},
{
  id: 'nodo10',
  panorama: `${baseUrl}10.jpg`,
  thumbnail: `${baseUrl}10.jpg`,
  name: 'Segundo Piso',
  caption: 'Segundo Piso MegaFitness Gym',
  links: [
    { nodeId: 'nodo9', position: {yaw: 3.2808406519372753, pitch: -0.16053549058285066}  },
    { nodeId: 'nodo11', position: {yaw: 1.6436034035301925, pitch: -0.12534423213602874} }
  ],
  sphereCorrection: { pan: '0deg' },
}
,
      {
        id: 'nodo11',
        panorama: `${baseUrl}11.jpg`,
        thumbnail: `${baseUrl}11.jpg`,
        name: 'Segundo Piso',
        caption: 'Segundo Piso MegaFitness Gym',
        links: [
{nodeId: 'nodo10',
          position: {yaw: 4.691902161770514, pitch: -0.1013517274452731}},
          ],
        sphereCorrection: { pan: '0deg' },
        
      }
    ],
    3: [
    {
  id: 'nodo19',
  panorama: `${baseUrl}19.jpg`,
  thumbnail: `${baseUrl}19.jpg`,
  name: 'Tercer Piso',
  caption: 'Tercer Piso MegaFitness Gym',
  links: [
  { nodeId: 'nodo21', position: {yaw: 1.0930247814209142, pitch: -0.03668910789538815} },
  { nodeId: 'nodo24', position: {yaw: 2.6108883080832106, pitch: -0.205278053299633} }
]
,
  sphereCorrection: { pan: '200deg' },
},
{
  id: 'nodo21',
  panorama: `${baseUrl}21.jpg`,
  thumbnail: `${baseUrl}21.jpg`,
  name: 'Tercer Piso',
  caption: 'Tercer Piso MegaFitness Gym',
  links: [
  { nodeId: 'nodo19', position: {yaw: 4.787169678900186, pitch: -0.1163197524345887} },
  { nodeId: 'nodo22', position: {yaw: 3.492643346971849, pitch: -0.32132621544640383} }
],
  sphereCorrection: { pan: '180deg' },
},
{
  id: 'nodo22',
  panorama: `${baseUrl}22.jpg`,
  thumbnail: `${baseUrl}22.jpg`,
  name: 'Tercer Piso',
  caption: 'Tercer Piso MegaFitness Gym',
  links: [
  { nodeId: 'nodo21', position: {yaw: 0.05268434501019233, pitch: -0.11222403168516859} },
  { nodeId: 'nodo23', position: {yaw: 2.9623350999113067, pitch: -0.30000119024869765} }
],
  sphereCorrection: { pan: '180deg' },
},
{
  id: 'nodo23',
  panorama: `${baseUrl}23.jpg`,
  thumbnail: `${baseUrl}23.jpg`,
  name: 'Tercer Piso',
  caption: 'Tercer Piso MegaFitness Gym',
  links: [
  { nodeId: 'nodo22', position: {yaw: 6.111241768754084, pitch: -0.12108911952293777} },
  { nodeId: 'nodo24', position: {yaw: 4.618858768171881, pitch: -0.21248986196608133} }
],
  sphereCorrection: { pan: '180deg' },
},

      {
        id: 'nodo24',
        panorama: `${baseUrl}24.jpg`,
        thumbnail: `${baseUrl}24.jpg`,
        name: 'Tercer Piso',
        caption: 'Tercer Piso MegaFitness Gym',
        links: [
  { nodeId: 'nodo23', position: {yaw: 1.4448070540144993, pitch: -0.08101673002886267} },
  { nodeId: 'nodo19', position: {yaw: 6.263866567997178, pitch: -0.16262865006809868} }
],
        sphereCorrection: { pan: '0deg' },
        
      }
    ],
    4: [
    {
  id: 'nodo26',
  panorama: `${baseUrl}26.jpg`,
  thumbnail: `${baseUrl}26.jpg`,
  name: 'Cuarto Piso',
  caption: 'Cuarto MegaFitness Gym',
  links: [
  { nodeId: 'nodo27', position: {yaw: 2.6108883080832106, pitch: -0.205278053299633} }
]
,
  sphereCorrection: { pan: '110deg' },
},
{
  id: 'nodo27',
  panorama: `${baseUrl}27.jpg`,
  thumbnail: `${baseUrl}27.jpg`,
  name: 'Cuarto Piso',
  caption: 'Cuarto MegaFitness Gym',
  links: [
  { nodeId: 'nodo26', position: {yaw: 5.9905624485788165, pitch: -0.05340786040916967} },
  { nodeId: 'nodo28', position: {yaw: 4.415275706023223, pitch: -0.12647248068845984} }
],
  sphereCorrection: { pan: '180deg' },
},
{
  id: 'nodo28',
  panorama: `${baseUrl}28.jpg`,
  thumbnail: `${baseUrl}28.jpg`,
  name: 'Cuarto Piso',
  caption: 'Cuarto MegaFitness Gym',
  links: [
  { nodeId: 'nodo27', position: {yaw: 4.18215197822498, pitch: -0.1535632756844465} },
],
  sphereCorrection: { pan: '180deg' },
},

    ],
  };

  let currentFloor = 2;
  const viewer = new Viewer({
    container: document.querySelector('#viewer360'),
    loadingImg: '../cusig2.gif',
    touchmoveTwoFingers: false,
    mousewheelCtrlKey: true,
    defaultYaw: '130deg',
    navbar: 'zoom move gallery caption fullscreen',
    mousemoveSensitivity: 2,
    touchmoveSensitivity: 2,
    defaultZoomLvl: 0,
    plugins: [
      MarkersPlugin,
      [
        GalleryPlugin,
        {
          thumbnailSize: { width: 100, height: 100 },
        }
      ],
      [
        VirtualTourPlugin,
        {
          positionMode: 'manual',
          renderMode: '3d',
          nodes: pisos[currentFloor],
          startNodeId: 'nodo1',
        }
      ],
      [
        PlanPlugin.PlanPlugin,
        {
          defaultZoom: 17,
          bearing: '270deg',
          coordinates: [-76.48453790887027, 3.423871343077609],
          layers: [{
            name: 'OpenStreetMap',
            urlTemplate: 'https://tile.openstreetmap.org/{z}/{x}/{y}.png',
            attribution: '&copy; OpenStreetMap',
          }],
          visibleOnLoad: false,
        }
      ],
      [
        VisibleRangePlugin,
        {}
      ]
    ]
  }); 

  window.changeFloor = function(floor) {
    if (floor === currentFloor) return;
    currentFloor = floor;
    const vtPlugin = viewer.getPlugin(VirtualTourPlugin);
    vtPlugin.setNodes(pisos[floor]);
    vtPlugin.setCurrentNode(pisos[floor][0].id);
    document.querySelectorAll('.nivel-boton').forEach((btn, index) => {
      if (index + 1 === floor) {
        btn.classList.add('activo');
      } else {
        btn.classList.remove('activo');
      }
    });
  };

  viewer.addEventListener('ready', () => {
  console.log('The viewer is ready');
  
  // Obt√©n las instancias de los plugins VirtualTour y VisibleRange
  const vtPlugin = viewer.getPlugin(VirtualTourPlugin);
  const rangePlugin = viewer.getPlugin(VisibleRangePlugin);
  
  // Aplicar restricci√≥n inmediata para nodo1
  if (vtPlugin.getCurrentNode() === 'nodo1') {
    console.log('Aplicando restricci√≥n en nodo1 (inicio)');
    // Establece el rango horizontal en radianes (0 a œÄ = 0 a 180¬∞)
    rangePlugin.setHorizontalRange([0, 200 * Math.PI / 180]);
  }
  
  // Escuchar el cambio de nodo y aplicar o quitar la restricci√≥n seg√∫n corresponda
  vtPlugin.addEventListener('node-changed', (e) => {
    console.log('Nodo cambiado a:', e.node.id);
    if (e.node.id === 'nodo1') {
      // Si se vuelve al nodo1, se aplica la restricci√≥n
      rangePlugin.setHorizontalRange([0, 200 * Math.PI / 180]);
    } else {
      // Para cualquier otro nodo, se remueve la restricci√≥n
      rangePlugin.setHorizontalRange(null);
    }
  });
  
  // (Opcional) Un segundo m√©todo para asegurarse de que la restricci√≥n se aplique correctamente tras la carga inicial
  setTimeout(() => {
    if (vtPlugin && vtPlugin.getCurrentNode() === 'nodo1' && rangePlugin) {
      console.log('Aplicando restricci√≥n despu√©s del timeout');
      rangePlugin.setHorizontalRange([0, 200 * Math.PI / 180]);
    }
  }, 1000);

  // (Tus otros eventos, por ejemplo, para obtener la posici√≥n o clicks)
  setInterval(() => {
    const position = viewer.getPosition();
    console.log('Current Position:', { yaw: position.yaw, pitch: position.pitch });
  }, 2000);
  
  viewer.addEventListener('click', (e) => {
    console.log('Click Coordinates:', { yaw: e.yaw, pitch: e.pitch });
  });
});

</script>

<!-- DIV oculto para la API de Google Maps (contexto para Places) -->
<div id="map" style="display: none;"></div>

<!-- C√ìDIGO PARA OBTENER Y MOSTRAR LAS RESE√ëAS EN EL CARRUSEL -->
<script>
  async function initReviews() {
    const { Map } = await google.maps.importLibrary("maps");
    const { Place } = await google.maps.importLibrary("places");

    // Crear un mapa oculto para el contexto de la API
    const map = new Map(document.getElementById("map"), {
      center: { lat: 0, lng: 0 },
      zoom: 15,
    });

    // Instanciar Place con el ID del lugar
    const place = new Place({
      id: "ChIJ900_-hWnMI4RaCjsR5PIDjE",
      requestedLanguage: "es"
    });

    await place.fetchFields({
      fields: ["displayName", "reviews"]
    });

    console.log("Nombre del lugar:", place.displayName);
    console.log("Rese√±as:", place.reviews);

    const carousel = document.getElementById("reviews-carousel");
    if (place.reviews && place.reviews.length > 0) {
      place.reviews.forEach(review => {
        const authorName = review.authorAttribution && review.authorAttribution.displayName ? review.authorAttribution.displayName : "Sin autor";
        const authorPhoto = review.authorAttribution && review.authorAttribution.photoURI ? review.authorAttribution.photoURI : "";

        const item = document.createElement("div");
item.classList.add("item");
item.innerHTML = `
<div class="review" 
     style="width: 100%; 
            display: flex; 
            flex-direction: column; 
            color: black; 
            border-bottom: 1px solid #ccc; 
            margin-bottom: 1em;">

  <!-- FILA PRINCIPAL (FOTO 30% / INFO 70%) -->
  <div class="review-row" 
       style="display: flex; 
              width: 100%; 
              height: 100px; 
              box-sizing: border-box;">
    
    <!-- COLUMNA IZQUIERDA (FOTO 30%) -->
    <div class="review-photo" 
         style="width: 30%; 
                display: flex; 
                align-items: center; 
                justify-content: center;">
      ${
        authorPhoto
          ? `<img src="${authorPhoto}" 
                   alt="${authorName}" 
                   style="width: 60px; 
                          height: 60px; 
                          border-radius: 50%;" />`
          : ''
      }
    </div>

    <!-- COLUMNA DERECHA (SUBDIVIDIDA EN 2 FILAS) -->
    <div class="review-right" 
         style="width: 70%; 
                display: flex; 
                flex-direction: column;">

      <!-- FILA SUPERIOR (60% ALTURA: NOMBRE) -->
      <div class="review-right-top" 
           style="flex: 0.6; 
                  display: flex; 
                  align-items: center; 
                  padding-left: 10px;">
        <strong style="font-size: 1.1em; color: black;">
          ${authorName}
        </strong>
      </div>

      <!-- FILA INFERIOR (40% ALTURA: CALIFICACI√ìN) -->
      <div class="review-right-bottom" 
   style="flex: 0.4; display: flex; align-items: center; padding-left: 10px;">
<span style="color: black;">
  ${review.rating ? '‚≠ê'.repeat(Math.round(review.rating)) : 'N/A'}
</span>
</div>


    </div>
  </div>

<!-- COMENTARIO (OCUPA ANCHO COMPLETO) -->
  <div class="review-comment">
    <p style="margin: 0; color: black; overflow-wrap: break-word; word-break: break-word;">
      ${review.text || ''}
    </p>
  </div>
</div>
`;

        carousel.appendChild(item);
      });
    } else {
      carousel.textContent = "No se encontraron rese√±as para este lugar.";
    }

    // Inicializar Owl Carousel para mostrar una rese√±a por slide
    $("#reviews-carousel").owlCarousel({
      loop: true,
      margin: 10,
      nav: true,
      items: 1,
      autoplay: true,
      autoplayTimeout: 5000,
      autoplayHoverPause: true,
    });
  }
</script>
<!-- Cargar la API de Google Maps para las rese√±as con callback initReviews -->
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDMIGStZG_dcrnibQqg7t9KM-v-Yyt8fFM&v=weekly&callback=initReviews"></script>

</body>

</html>
